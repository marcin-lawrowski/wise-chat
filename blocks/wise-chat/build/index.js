!function(){"use strict";var e={n:function(t){var l=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(l,{a:l}),l},d:function(t,l){for(var o in l)e.o(l,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:l[o]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=window.wp.blocks,l=window.wp.element,o=window.wp.i18n,n=window.wp.blockEditor,a=window.wp.components,r=window.wp.serverSideRender,c=e.n(r);window.React;let s=[];function i(e){for(let t of e)if("childList"===t.type&&t.addedNodes[0]&&jQuery(".wcContainer",t.addedNodes[0]).length>=1){const e=jQuery(".wcContainer",t.addedNodes[0]).attr("id");e&&!s.includes(e)&&(s=[...s,e],_wiseChat.init(jQuery("#"+e)))}}var u=JSON.parse('{"u2":"kainex/wise-chat"}');(0,t.registerBlockType)(u.u2,{edit:function(e){let{attributes:t,setAttributes:r}=e;const s=(0,l.useRef)(null),[u,_]=(0,l.useState)("");(0,l.useLayoutEffect)((()=>{let e;return s.current&&(e=new MutationObserver(i),e.observe(s.current,{childList:!0,subtree:!0})),()=>{e&&e.disconnect()}}),[]);const h=e=>{const t=_wiseChatData.siteUrl+"/wp-admin/options-general.php?page=wise-chat-admin#tab="+e;return(0,l.createElement)("div",null,(0,l.createElement)("a",{href:t,className:"",target:"_blank"},(0,o.__)("Advanced Settings")),(0,l.createElement)("br",null))};function d(){return t.channel.replace(/^{|}$/g,"").split(",")}return(0,l.createElement)("div",(0,n.useBlockProps)({ref:s}),(0,l.createElement)(n.InspectorControls,{key:"setting"},(0,l.createElement)(a.PanelBody,{title:(0,o.__)("Chat Settings"),initialOpen:!0},(0,l.createElement)("label",null,"Public channels:"),(0,l.createElement)("ul",null,d().filter((e=>e)).map(((e,t,o)=>(0,l.createElement)("li",null,t+1,". ",e,o.length>1&&(0,l.createElement)("span",null," | ",(0,l.createElement)("a",{href:"#",onClick:e=>function(e,t){e.preventDefault(),r({channel:"{"+d().filter(((e,l)=>l!==t)).join(",")+"}"})}(e,t)},"delete")))))),(0,l.createElement)(a.TextControl,{label:"Add Channel",value:u,onChange:e=>_(e),className:"mb-0"}),(0,l.createElement)(a.__experimentalText,{align:"right",isBlock:!0},(0,l.createElement)(a.Button,{variant:"secondary",onClick:function(){u&&(r({channel:"{"+[...d(),u].join(",")+"}"}),_(""))}},"Add")),(0,l.createElement)(a.CheckboxControl,{label:"Disable Anonymous Users",checked:t.access_mode,onChange:e=>r({access_mode:e}),help:"Only logged in WordPress users are allowed to enter the chat"}),(0,l.createElement)(a.TextControl,{label:"Window Title",value:t.window_title,onChange:e=>r({window_title:e})}),(0,l.createElement)(a.SelectControl,{label:"Theme",value:t.theme,options:[{value:"",label:"Default"},{value:"lightgray",label:"Light Gray"},{value:"colddark",label:"Cold Dark"},{value:"airflow",label:"Air Flow"}],onChange:e=>r({theme:e})}),(0,l.createElement)(a.TextControl,{label:"Width",value:t.chat_width,onChange:e=>r({chat_width:e})}),(0,l.createElement)(a.TextControl,{label:"Height",value:t.chat_height,onChange:e=>r({chat_height:e})}),h("appearance")),(0,l.createElement)(a.PanelBody,{title:(0,o.__)("Messages"),initialOpen:!1},(0,l.createElement)(a.SelectControl,{label:"Messages Order",value:t.messages_order,options:[{value:"",label:"Newest on the bottom"},{value:"descending",label:"Newest on the top"}],onChange:e=>r({messages_order:e})}),(0,l.createElement)(a.SelectControl,{label:"Message Time Mode",value:t.messages_time_mode,options:[{value:"hidden",label:"Hidden"},{value:"",label:"Full"},{value:"elapsed",label:"Elapsed"}],onChange:e=>r({messages_time_mode:e})}),(0,l.createElement)(a.CheckboxControl,{label:"Show Avatars",checked:t.show_avatars,onChange:e=>r({show_avatars:e})}),(0,l.createElement)("label",null,"Background Color"),(0,l.createElement)(n.ColorPalette,{heading:"Background Color",value:t.background_color,onChange:e=>r({background_color:e})}),(0,l.createElement)("label",null,"Font Color"),(0,l.createElement)(n.ColorPalette,{heading:"Font Color",value:t.text_color,onChange:e=>r({text_color:e})}),h("appearance")),(0,l.createElement)(a.PanelBody,{title:(0,o.__)("Input"),initialOpen:!1},(0,l.createElement)(a.CheckboxControl,{label:"Show Emoticon Button",checked:t.show_emoticon_insert_button,onChange:e=>r({show_emoticon_insert_button:e})}),(0,l.createElement)(a.CheckboxControl,{label:"Show Image Button",checked:t.show_image_upload_button,onChange:e=>r({show_image_upload_button:e})}),(0,l.createElement)(a.CheckboxControl,{label:"Show File Button",checked:t.show_file_upload_button,onChange:e=>r({show_file_upload_button:e})}),(0,l.createElement)(a.CheckboxControl,{label:"Show Submit Button",checked:t.show_message_submit_button,onChange:e=>r({show_message_submit_button:e})}),(0,l.createElement)(a.CheckboxControl,{label:"Multiline Messages",checked:t.multiline_support,onChange:e=>r({multiline_support:e})}),(0,l.createElement)(a.CheckboxControl,{label:"Show User Name",checked:t.show_user_name,onChange:e=>r({show_user_name:e})}),(0,l.createElement)(a.SelectControl,{label:"Input Location",value:t.input_controls_location,options:[{value:"",label:"Bottom"},{value:"top",label:"Top"}],onChange:e=>r({input_controls_location:e})}),(0,l.createElement)("label",null,"Background Color"),(0,l.createElement)(n.ColorPalette,{heading:"Background Color",value:t.background_color_input,onChange:e=>r({background_color_input:e})}),(0,l.createElement)("label",null,"Font Color"),(0,l.createElement)(n.ColorPalette,{heading:"Font Color",value:t.text_color_input_field,onChange:e=>r({text_color_input_field:e})}),h("appearance")),(0,l.createElement)(a.PanelBody,{title:(0,o.__)("Browser"),initialOpen:!1},(0,l.createElement)(a.CheckboxControl,{label:"Enabled",checked:t.show_users,onChange:e=>r({show_users:e})}),(0,l.createElement)(a.SelectControl,{label:"Location",value:t.browser_location,options:[{value:"",label:"Right"},{value:"left",label:"Left"}],onChange:e=>r({browser_location:e})}),(0,l.createElement)(a.CheckboxControl,{label:"Show Users Search Box",checked:t.show_users_list_search_box,onChange:e=>r({show_users_list_search_box:e})}),(0,l.createElement)(a.CheckboxControl,{label:"Show Avatars",checked:t.show_users_list_avatars,onChange:e=>r({show_users_list_avatars:e})}),(0,l.createElement)(a.CheckboxControl,{label:"Show National Flags",checked:t.show_users_flags,onChange:e=>r({show_users_flags:e})}),(0,l.createElement)(a.CheckboxControl,{label:"Show City And Country",checked:t.show_users_city_and_country,onChange:e=>r({show_users_city_and_country:e})}),(0,l.createElement)(a.CheckboxControl,{label:"Show Online / Offline Mark",checked:t.show_users_online_offline_mark,onChange:e=>r({show_users_online_offline_mark:e})}),(0,l.createElement)(a.CheckboxControl,{label:"Show Online Users Counter",checked:t.show_users_counter,onChange:e=>r({show_users_counter:e})}),(0,l.createElement)("label",null,"Background Color"),(0,l.createElement)(n.ColorPalette,{heading:"Background Color",value:t.background_color_users_list,onChange:e=>r({background_color_users_list:e})}),(0,l.createElement)("label",null,"Font Color"),(0,l.createElement)(n.ColorPalette,{heading:"Font Color",value:t.text_color_users_list,onChange:e=>r({text_color_users_list:e})}),h("appearance"))),(0,l.createElement)(c(),{block:"kainex/wise-chat",attributes:t}))},save:function(e){let{attributes:t}=e,o={...t};o.show_image_upload_button?(o.allow_post_images="1",o.enable_images_uploader="1"):(o.allow_post_images="",o.enable_images_uploader=""),o.show_file_upload_button?o.enable_attachments_uploader="1":o.enable_attachments_uploader="",delete o.show_image_upload_button,delete o.show_file_upload_button;const a=o?Object.keys(o).map((e=>{return e+'="'+(!0===(t=o[e])?"1":!1===t?"0":t)+'"';var t})).join(" "):"";return(0,l.createElement)("p",n.useBlockProps.save(),"[wise-chat ",a,"]")}})}();